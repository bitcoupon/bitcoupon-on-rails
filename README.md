[![Build Status](https://travis-ci.org/bitcoupon/bitcoupon-on-rails.svg?branch=master)](https://travis-ci.org/bitcoupon/bitcoupon-on-rails)

BitCoin Coupon
==============

BitCoupon will replace paper coupons used at social events and stores with an
easy to use mobile application. This product is a local and highly secure
transaction system which is simple to use for both administrator and client,
and where both parties can be sure that all transactions are valid and fair.

## In this repository

### /admin

This is where the Admin client for the BitCoupon application is written.

It is written as a Ruby on Rails applications which consumes a JSON API, and renders to HTML as a web application.

[Read more](admin/README.rdoc)

### /backend

This is the backend that both the Admin client, and the Android mobile client connects to. It uses a sqlite3 database as data storage, and serves JSON through all the API endpoints.

[Read more](backend/README.rdoc)

### /bitcoin

Contains the executable .jar-file for the BitCoupon Java library defined in [bitcoupon/bitcoupon-android-client](https://github.com/bitcoupon/bitcoupon-android-client)

### /documentation

The autogenerated documentation from the two Ruby on Rails applications.

### /ruby-java-integration

Contains two proof-of-concepts on communicating between Ruby and Java using either a command line application, or using BSD sockets. The CLI option was chosen for this project.

### /test_reports

Contains autogenerated test reports with code coverage, generated by the gem SimpleCov.

### / - configuration files

**.admin.sh** - Sets up an admin server on port 3001.
This file installs the dependencies defined in admin/Gemfile using bundle install.
It then migrates the database, and precompiles CSS and JS assets. Then the server is started with the production settings.

**.after_travis.sh** - Runs when Travis CI has run the tests. It kills the backend server if we started one.

**.backend.sh** - Sets up a backend server on port 3002, with production settings.

**.before_travis.sh** - If we test the admin client, we first set up a backend server, and in either case we change directory into the directory that should be tested.

**.generate_docs.sh** - Contains the commands necessary to update the documentation in /documentation.

**.gitignore** - Keeps files out of the source control.

**.rubocop.yml** - Excludes files from the 'rubocop' command.

**.ruby-version** - Tells RVM which ruby version to use in this project.

**.run_tests.sh** - Runs the command necessary to run all the tests in the repository

**.run_tests_with_backend_running.sh** - If a backend server is already running using *.backend.sh*, then we can run the tests with this simpler script.

**.runner.sh** - Sets up the two applications on the server we have used as a staging environment. Uses *screen* so that the applications keep running even if we log out of the ssh session.

**.travis.yml** - Defines the commands that should be run by Travis CI when running Continuous Integration on the project. It runs *rake test* for both /admin and /backend and also runs the *rubocop* gem to check for syntax and style guide violations.
